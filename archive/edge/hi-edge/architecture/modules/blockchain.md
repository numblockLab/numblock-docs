---
id: blockchain
title: ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®
description: ‡§™‡•â‡§≤‡•Ä‡§ó‡•â‡§® ‡§è‡§ú ‡§ï‡•Ä ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§∏‡•ç‡§ü‡•á‡§ü ‡§î‡§∞ ‡§∏‡•ç‡§ü‡•á‡§ü ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡•Ä‡§ï‡§∞‡§£.
keywords:
  - docs
  - polygon
  - edge
  - architecture
  - module
  - blockchain
  - state
---

## ‡§ì‡§µ‡§∞‡§µ‡•ç‡§Ø‡•Ç {#overview}

‡§™‡•â‡§≤‡•Ä‡§ó‡•â‡§® ‡§è‡§ú ‡§ï‡•á ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ **‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®** ‡§î‡§∞ **‡§∏‡•ç‡§ü‡•á‡§ü** ‡§π‡•à‡§Ç. <br />

**‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®** ‡§µ‡§π ‡§™‡§æ‡§µ‡§∞‡§π‡§æ‡§â‡§∏ ‡§π‡•à ‡§ú‡•ã ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•á ‡§™‡•Å‡§®‡§∞‡•ç‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à. ‡§á‡§∏‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§π‡•à ‡§ï‡§ø ‡§Ø‡§π ‡§∏‡§≠‡•Ä ‡§â‡§® ‡§≤‡•â‡§ú‡§ø‡§ï ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§Æ‡•á‡§Ç ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç.

**‡§∏‡•ç‡§ü‡•á‡§ü** *‡§ë‡§¨‡•ç‡§ú‡•á‡§ï‡•ç‡§ü* ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§®‡§ø‡§ß‡§ø‡§§‡•ç‡§µ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à. ‡§Ø‡§π ‡§á‡§∏‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§π‡•à ‡§ï‡§ø ‡§®‡§è ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•ã ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§∏‡•ç‡§ü‡•á‡§ü ‡§ï‡•à‡§∏‡•á ‡§¨‡§¶‡§≤ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à. <br /> ‡§Ö‡§®‡•ç‡§Ø ‡§¨‡§æ‡§§‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§•, **‡§∏‡•ç‡§ü‡•á‡§ü** ‡§π‡•à‡§Ç‡§°‡§≤‡•ç‡§∏:
* ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡•à‡§ï‡•ç‡§∂‡§® ‡§ï‡•ã ‡§è‡§ï‡•ç‡§ú‡•Ä‡§ï‡•ç‡§Ø‡•Ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à
* EVM ‡§ï‡•ã ‡§è‡§ï‡•ç‡§ú‡•Ä‡§ï‡•ç‡§Ø‡•Ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à
* Merkle tries ‡§ï‡•ã ‡§¨‡§¶‡§≤ ‡§∞‡§π‡§æ
* ‡§Ö‡§ß‡§ø‡§ï‡§§‡§∞, ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ **‡§∏‡•ç‡§ü‡•á‡§ü** ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§µ‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à üôÇ

‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ü‡•á‡§ï‡§Ö‡§µ‡•á ‡§Ø‡§π ‡§π‡•à ‡§ï‡§ø ‡§á‡§® 2 ‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§†‡•Ä‡§ï ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à ‡§î‡§∞ ‡§Ø‡•á ‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§ï‡•á ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∏‡§æ‡§• ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç. <br /> ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§ú‡§¨ **‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®** ‡§≤‡•á‡§Ø‡§∞ ‡§ï‡•ã ‡§¨‡•ç‡§≤‡•â‡§ï (‡§î‡§∞ ‡§ï‡•ã‡§à ‡§™‡•Å‡§®‡§∞‡•ç‡§ó‡§†‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü) ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π **‡§∏‡•ç‡§ü‡•á‡§ü** ‡§ï‡•ã ‡§∏‡•ç‡§ü‡•á‡§ü ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡§ø‡§∂‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§π‡§§‡§æ ‡§π‡•à.

**‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®** ‡§ï‡•ã ‡§∏‡§π‡§Æ‡§§‡§ø ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡•Å‡§õ ‡§π‡§ø‡§∏‡•ç‡§∏‡•ã‡§Ç ‡§∏‡•á ‡§≠‡•Ä ‡§®‡§ø‡§™‡§ü‡§®‡§æ ‡§™‡§°‡§º‡§§‡§æ ‡§π‡•à (‡§ú‡•à‡§∏‡•á * ‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§∏‡§π‡•Ä ethHash ‡§π‡•à?* *‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡§π ‡§∏‡§π‡•Ä PoW ‡§π‡•à?*). <br /> ‡§è‡§ï ‡§µ‡§æ‡§ï‡•ç‡§Ø ‡§Æ‡•á‡§Ç, **‡§Ø‡§π ‡§≤‡•â‡§ú‡§ø‡§ï ‡§ï‡§æ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡•ã‡§∞ ‡§π‡•à ‡§ú‡§ø‡§∏‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§∏‡§≠‡•Ä ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à**.

## *WriteBlocks*

**‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®** ‡§≤‡•á‡§Ø‡§∞ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§∏‡§¨‡§∏‡•á ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≠‡§æ‡§ó *WriteBlocks* ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§π‡•à:

````go title="blockchain/blockchain.go"
// WriteBlocks writes a batch of blocks
func (b *Blockchain) WriteBlocks(blocks []*types.Block) error {
	if len(blocks) == 0 {
		return fmt.Errorf("no headers found to insert")
	}

	parent, ok := b.readHeader(blocks[0].ParentHash())
	if !ok {
		return fmt.Errorf("parent of %s (%d) not found: %s", blocks[0].Hash().String(), blocks[0].Number(), blocks[0].ParentHash())
	}

	// validate chain
	for i := 0; i < len(blocks); i++ {
		block := blocks[i]

		if block.Number()-1 != parent.Number {
			return fmt.Errorf("number sequence not correct at %d, %d and %d", i, block.Number(), parent.Number)
		}
		if block.ParentHash() != parent.Hash {
			return fmt.Errorf("parent hash not correct")
		}
		if err := b.consensus.VerifyHeader(parent, block.Header, false, true); err != nil {
			return fmt.Errorf("failed to verify the header: %v", err)
		}

		// verify body data
		if hash := buildroot.CalculateUncleRoot(block.Uncles); hash != block.Header.Sha3Uncles {
			return fmt.Errorf("uncle root hash mismatch: have %s, want %s", hash, block.Header.Sha3Uncles)
		}
		
		if hash := buildroot.CalculateTransactionsRoot(block.Transactions); hash != block.Header.TxRoot {
			return fmt.Errorf("transaction root hash mismatch: have %s, want %s", hash, block.Header.TxRoot)
		}
		parent = block.Header
	}

	// Write chain
	for indx, block := range blocks {
		header := block.Header

		body := block.Body()
		if err := b.db.WriteBody(header.Hash, block.Body()); err != nil {
			return err
		}
		b.bodiesCache.Add(header.Hash, body)

		// Verify uncles. It requires to have the bodies on memory
		if err := b.VerifyUncles(block); err != nil {
			return err
		}
		// Process and validate the block
		if err := b.processBlock(blocks[indx]); err != nil {
			return err
		}

		// Write the header to the chain
		evnt := &Event{}
		if err := b.writeHeaderImpl(evnt, header); err != nil {
			return err
		}
		b.dispatchEvent(evnt)

		// Update the average gas price
		b.UpdateGasPriceAvg(new(big.Int).SetUint64(header.GasUsed))
	}

	return nil
}
````
*WriteBlocks* ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§Æ‡•á‡§Ç ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•ã ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡§æ ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§™‡•â‡§á‡§Ç‡§ü ‡§π‡•à. ‡§™‡•à‡§∞‡§æ‡§Æ‡•Ä‡§ü‡§∞ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç, ‡§Ø‡§π ‡§ï‡§à ‡§∞‡•á‡§Ç‡§ú ‡§ï‡•á ‡§¨‡•ç‡§≤‡•â‡§ï ‡§≤‡•á‡§§‡§æ ‡§π‡•à.<br />
‡§∏‡§¨‡§∏‡•á ‡§™‡§π‡§≤‡•á, ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡•ã ‡§µ‡•à‡§≤‡§ø‡§°‡•á‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à. ‡§á‡§∏‡§ï‡•á ‡§¨‡§æ‡§¶, ‡§á‡§®‡•ç‡§π‡•á‡§Ç ‡§ö‡•á‡§® ‡§ï‡•ã ‡§≤‡§ø‡§ñ‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à.

*WriteBlocks* ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ *processBlock* ‡§µ‡§ø‡§ß‡§ø ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§ï‡•á ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï *‡§∏‡•ç‡§ü‡•á‡§ü ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§ú‡§ø‡§∂‡§®* ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à.

‡§Ø‡§π ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§®‡•á ‡§≤‡§æ‡§Ø‡§ï ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø, ‡§Ø‡§π ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•à‡§® ‡§ï‡•ã ‡§¨‡•ç‡§≤‡•â‡§ï ‡§≤‡§ø‡§ñ‡§®‡•á ‡§ï‡§æ ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§™‡•ç‡§µ‡§æ‡§á‡§Ç‡§ü ‡§π‡•à, ‡§Ö‡§®‡•ç‡§Ø ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ (‡§ú‡•à‡§∏‡•á ‡§ï‡§ø **‡§∏‡•Ä‡§≤‡§∞**) ‡§á‡§∏ ‡§§‡§∞‡•Ä‡§ï‡•á ‡§ï‡§æ ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç.

## ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§∏‡§¨‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§∂‡§® {#blockchain-subscriptions}

‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§®-‡§∞‡§ø‡§≤‡•á‡§ü‡•á‡§° ‡§¨‡§¶‡§≤‡§æ‡§µ‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡•â‡§®‡§ø‡§ü‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§è‡§ï ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è. <br />
‡§Ø‡§π‡§æ‡§Å ‡§™‡§∞ **‡§∏‡§¨‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§∂‡§®** ‡§Ü‡§§‡•á ‡§π‡•à‡§Ç.

‡§∏‡§¨‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§∂‡§® ‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§á‡§µ‡•á‡§Ç‡§ü ‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ ‡§Æ‡•á‡§Ç ‡§ü‡•à‡§™ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§è‡§ï ‡§§‡§∞‡•Ä‡§ï‡§æ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§π‡§æ‡§Å ‡§™‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à.

````go title="blockchain/subscription.go"
type Subscription interface {
    // Returns a Blockchain Event channel
	GetEventCh() chan *Event
	
	// Returns the latest event (blocking)
	GetEvent() *Event
	
	// Closes the subscription
	Close()
}
````

**‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•á‡§® ‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏** ‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§ö‡•á‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§è ‡§ó‡§è ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à. ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§∞‡•ç‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§• ‡§®‡§è ‡§¨‡•ç‡§≤‡•â‡§ï ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç:

````go title="blockchain/subscription.go"
type Event struct {
	// Old chain removed if there was a reorg
	OldChain []*types.Header

	// New part of the chain (or a fork)
	NewChain []*types.Header

	// Difficulty is the new difficulty created with this event
	Difficulty *big.Int

	// Type is the type of event
	Type EventType

	// Source is the source that generated the blocks for the event
	// right now it can be either the Sealer or the Syncer. TODO
	Source string
}
````

:::tip ‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂‡§∞
‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§ï‡•ã ‡§Ø‡§æ‡§¶ ‡§π‡•à ‡§ï‡§ø ‡§π‡§Æ‡§®‡•á [CLI ‡§ï‡§Æ‡§æ‡§Ç‡§°‡•ç‡§∏](/docs/edge/get-started/cli-commands) ‡§Æ‡•á‡§Ç ***‡§Æ‡•â‡§®‡§ø‡§ü‡§∞*** ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§ï‡§æ ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§ï‡§¨ ‡§ï‡§ø‡§Ø‡§æ ‡§•‡§æ?

‡§¨‡•ç‡§≤‡•â‡§ï‡§ö‡•à‡§® ‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏ ‡§ê‡§∏‡•á ‡§Æ‡•Ç‡§≤ ‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏ ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§™‡•â‡§≤‡•Ä‡§ó‡•â‡§® ‡§è‡§ú ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç, ‡§î‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡•û‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§™‡•ç‡§∞‡•ã‡§ü‡•ã‡§ï‡•â‡§≤ ‡§¨‡§´‡§º‡§∞ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§´‡§º‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§Æ‡•à‡§™ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à.

:::