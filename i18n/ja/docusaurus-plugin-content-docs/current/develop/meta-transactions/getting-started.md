---
id: meta-transactions
title: メタトランザクション
sidebar_label: Overview
description: メタトランザクションとその使用方法について学びます。
keywords:
  - docs
  - polygon
  - matic
  - transactions
  - meta transactions
  - gasless
image: https://matic.network/banners/matic-network-16x9.png
slug: meta-transactions
---

毎日のスマートコントラクトコールは最高で、1日あたり約250万から300万回に達します。DAppsは、その有用性を認識し始めていますが、自分たちの成功や他の人の成功の犠牲者になりつつありますガス代で成功します。言うまでもなく、ユーザのオンボーディングのハードルや、現在の課題であるUXは簡単に修正できるものではありません。

## スマートコントラクトのサービス {#servicing-smart-contracts}

設計上、スマートコントラクトは、決定論的な状態マシンです。すなわち、ドランザクション料金が支払われると実行され、ネットワークの計算資源を使用してコントラクトのロジックをサービスするものです。これを実現するのが、Ethereum（とPolygon）上のガスメターモデルです。

## トランザクションの状態 {#the-current-state-of-transacting}

Ethereum（および他のブロックチェーンも同様）上のこの伝統的なトランザクションモデルには制限があります。よくある制限は、ユーザには、ガス代を支払う手段がないという制限です。デフォルトでは、これらの動作は連動しているため、トランザクションの送信者は支払者として機能し、ユーザがトランザクションを作成し、トランザクションを送信しようとした場合、関連するガス代を支払う責任があります。同様に、ユーザがdAppをビルド、やり取り、または実行する場合、ユーザはガス代を支払う必要があります。

平均的なユーザが、仮想通貨を購入し、ガス代を払って、アプリケーションとやり取りすることを期待するのは非現実的です。これにアドレスするためにできることは、トランザクションの送信者を支払者としての機能から切り離し、トランザクションの実行をスケールするための、シームレスな取引体験を開始するための機会を可能にすることです。

トランザクションを直接実行する代わりに、ガスを処理するミドルウェアが（サードパーティを介して）存在します。ここで、メタトランザクションの出番です。

## メタトランザクションとは? {#what-are-meta-transactions}

メタトランザクションにより、誰でもブロックチェーンとやり取りできます。ユーザは、トランザクション手数料を通じてネットワークのサービスに対して支払うトークンを必要としません。これは、トランザクションの送信者とガスの支払者を分離することによって行われます。

新しいユーザをオンボーディングし、現在のユーザを支援できるソリューションです。

トランザクションの実行者は、送信者として機能します。ガスを消費するのではなく、唯一作成するのはトランザクション リクエストです。これをするには、意図したアクション（トランザクションパラメータ）にプライベート鍵で署名します。メタトランザクションは、通常のEthereumトランザクションであり、メタトランザクションを作成するための追加パラメータを含みます。

署名されたトランザクションパラメータは、リレーとして機能する二次ネットワークに渡されますこれにはさまざまなスキームがありますが、リレイヤーは、通常、トランザクションを検証することによって、どのトランザクションを送信する価値があるかを選択します（たとえば、dAppに関連しているなど）。検証すると、リレイヤーはリクエスト（署名されたメッセージ）を実際のトランザクション（つまり、ガス代金の支払い）にラップします。コントラクトは、それをネットワークにブロードキャストし、そこでコントラクトは、元の署名を検証してトランザクションをアンラップし、ユーザに代わって実行します。

:::note メタとバッチという言葉は、いくつかの言葉に似ているかもしれません

明確にするために：メタトランザクションはバッチトランザクションとは異なります。バッチトランザクションは一度に複数のトランザクションを送信できるトランザクションであり、シングルの送信者（シングルのナンスが指定されている）から順番に実行されます。

:::

要約するとメタトランザクションは、次のデザインパターンとなります：

* ユーザ（送信者）は、自分の秘密鍵でリクエストに署名し、それをリレイヤーに送信する
* リレイヤーはリクエストをtxにラップし、コントラクトに送信する
* コントラクトは、txをアンラップして実行します

ネイティブトランザクションは、「送信者」も「支払者」であることを意味します。「支払者」を「送信者」から引き離すと、「送信者」は「意図者」のようになります - 送信者は完全に構築されたトランザクションではなく、メッセージに関連する特定のパラメーターを含むメッセージに署名することにより、ブロックチェーンで実行したいトランザクションの意図を示します。

## ユースケース {#use-cases}

dAppsのスケーリングとスマートコントラクトとのやり取りのためのメタトランザクションの機能を想像することができます。ユーザはガスレストランザクションを作成できるだけでなく、何度でも作成できます。また自動化ツールを使用すると、メタトランザクションは、実用的なユースケースのアプリケーションの次の波に影響を与えることができます。メタトランザクションは、スマートコントラクトロジックの真の有用性をイネーブルにしますが、これはガス代とオンチェーンで必要なやり取りのために制限されることがよくあります。

### 投票の例 {#example-with-voting}

ユーザはオンチェーンガバナンスに参加したいと考えており、投票コントラクトを通じて特定の結果に投票するつもりです。ユーザは、この特定のコントラクトでの投票でのユーザの決定を示すメッセージに署名します。伝統的に、彼らはコントラクトと対話するためにガス代金を支払う必要がありました（そして、コントラクトとやり取りする方法を知っています）が、代わりに、投票に必要な情報を含むメタトランザクション（オフチェーン）に署名し、それをリレイヤーに渡して、代理でトランザクションを実行させることができます。

署名されたメッセージはリレイヤーに送信されます（投票情報に関する署名付きtxパラメータ）。リレイヤーは、このトランザクションが優先投票であることを検証し、投票リクエストを実際のトランザクションにラップし、ガス代を支払い、投票コントラクトにブロードキャストします。投票コントラクトの終了時にすべてがチェックアウトされ、ユーザに代わって投票が実行されます。

## それらを試してみる {#try-them-out}

メタトランザクションをdAppに統合するために使用できるさまざまなアプローチに精通していると仮定しますが、これは、メタトランザクションに移行するか、それを使用して新しいdAppを構築するかによって異なります。

dAppをPolygon上のメタトランザクションと統合するには、次のリレイヤーのいずれかを使用するか、カスタムソリューションをスピンアップするかを選択できます。

* [バイコノミー](https://docs.biconomy.io/products/enable-gasless-transactions)
* [ガスステーションネットワーク（GSN）](https://docs.opengsn.org/#ethereum-gas-station-network-gsn)
* [Infura](https://infura.io/product/ethereum/transactions-itx)
* [Gelato](https://docs.gelato.network/developer-products/gelato-relay-sdk)
