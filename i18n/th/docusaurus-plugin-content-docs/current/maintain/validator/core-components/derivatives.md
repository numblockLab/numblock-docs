---
id: derivatives
title: Derivative
description: การมอบหมายผ่านแชร์ตัวตรวจสอบความถูกต้อง
keywords:
  - docs
  - polygon
  - matic
  - derivatives
  - delegation
  - shares
slug: derivatives
image: https://wiki.polygon.technology/img/polygon-wiki.png
---

Polygon จะรองรับ[การมอบหมายสิทธิ์](/docs/maintain/glossary#delegator)ผ่านหุ้นของผู้ตรวจสอบเมื่อใช้การออกแบบนี้ จะเป็นเรื่องง่ายกว่าในการให้ผลตอบแทนและการ Slash ตามขนาดในสัญญา Ethereum Mainnet โดยไม่ต้องคำนวณมากมาย

ผู้มอบหมายสิทธิ์จะมอบหมายสิทธิ์โดยการซื้อหุ้นของกองกลางแบบจำกัดจากผู้ตรวจสอบผู้ตรวจสอบแต่ละคนจะมีโทเค็นหุ้นสำหรับผู้ตรวจสอบของตนเอง

สมมติเราเรียกโทเค็นหุ้นที่แลกเปลี่ยนได้ของผู้ตรวจสอบว่า VATIC สำหรับผู้ตรวจสอบ A เมื่อผู้ใช้มอบหมายสิทธิ์ให้กับผู้ตรวจสอบ A ผู้ใช้จะได้รับ VATIC ตามอัตราแลกเปลี่ยนของคู่ MATIC-VATICเมื่อผู้ใช้ได้รับมูลค่าที่เพิ่มขึ้น อัตราแลกเปลี่ยนจะบ่งชี้ว่าผู้ใช้สามารถถอน MATIC ได้มากขึ้นสำหรับแต่ละ VATIC เมื่อผู้ตรวจสอบโดน Slash ผู้ใช้จะถอน MATIC ได้น้อยลงสำหรับแต่ละ VATIC

โปรดทราบว่า MATIC คือโทเค็นที่ใช้ในการ Stake ผู้มอบหมายสิทธิ์ต้องมีโทเค็น MATIC จึงจะเข้าร่วมในการมอบหมายสิทธิ์ได้

สมมติว่า แรกเริ่มผู้มอบหมายสิทธิ์ D ซื้อโทเค็นจากกองกลางเฉพาะของผู้ตรวจสอบ A ในตอนที่อัตราแลกเปลี่ยนเท่ากับ 1 MATIC ต่อ 1 VATIC

เมื่อผู้ตรวจสอบได้รับผลตอบแทนเป็นโทเค็น MATIC มากขึ้น ก็จะมีการเพิ่มโทเค็นใหม่ลงในกองกลาง

สมมติว่ากองกลางปัจจุบันมี MATIC จำนวน 100 โทเค็น และมีผลตอบแทนจำนวน 10 MATIC เพิ่มลงมาในกองกลางนั้นเนื่องจากโทเค็นทั้งหมดของระบบ VATIC ยังไม่มีการเปลี่ยนแปลงเนื่องจากได้รับรางวัล โดยอัตราแลกเปลี่ยนจะกลายเป็น 1 MATIC ต่อ 0.9 VATIC.ตอนนี้ ตัวเดเลเกเตอร์ D จะได้รับMATIC เพิ่มเติมสำหรับจำนวนเดียวกันหากหุ้น

## ขั้นตอนการประมวลผลสัญญา {#the-flow-in-the-contract}

`buyVoucher`: ฟังก์ชันนี้มีที่มาจากการดำเนินการกระบวนการมอบหมายสิทธิ์ให้กับผู้ตรวจสอบจะมีการโอนการมอบหมายสิทธิ์ `_amount` ไปยัง `stakeManager` ก่อน ซึ่งในการยืนยันจะสร้างหุ้นสำหรับการมอบหมายสิทธิ์ผ่าน `Mint` โดยใช้ `exchangeRate` ในปัจจุบัน

สูตรการคำนวณอัตราแลกเปลี่ยนคือ:

`ExchangeRate = (totalDelegatedPower + delegatorRewardPool) / totalDelegatorShares`

`sellVoucher`: นี่คือฟังก์ชันที่จะมีการเรียกใช้เมื่อผู้มอบหมายสิทธิ์ทำการ Unbond จากผู้ตรวจสอบโดยทั่วไปแล้ว ฟังก์ชันนี้จะเริ่มต้นกระบวนการขายบัตรกำนัลที่ซื้อในระหว่างการมอบหมายสิทธิ์ทั้งนี้ ในการถอนเงินจะมีช่วงเวลารอคอยที่ต้องนำมาพิจารณาก่อนที่ผู้มอบหมายสิทธิ์จะสามารถ `claim` โทเค็นของพวกเขาได้

`withdrawRewards`: ในฐานะผู้มอบหมายสิทธิ์ คุณสามารถรับผลตอบแทนได้โดยการเรียกใช้ฟังก์ชัน `withdrawRewards`

`reStake`: การ Retake สามารถทำได้สองวิธี คือ: ก) ผู้มอบหมายสิทธิ์สามารถซื้อหุ้นเพิ่มโดยใช้ `buyVoucher` หรือผลตอบแทนของ `reStake`คุณสามารถ Restake ได้โดยการ Stake โทเค็นเพิ่มเติมกับผู้ตรวจสอบ หรือคุณสามารถ Restake ผลตอบแทนสะสมของคุณในฐานะผู้มอบหมายสิทธิ์ก็ได้วัตถุประสงค์ของการ `reStaking` ก็คือ เมื่อผู้ตรวจสอบของผู้มอบหมายสิทธิ์มี Stake ที่มีผลอยู่มากกว่าเดิม พวกเขาจะได้รับผลตอบแทนมากขึ้นสำหรับการลงทุนเหล่านั้น และผู้มอบหมายสิทธิ์ก็จะได้รับเช่นกัน

`unStakeClaimTokens`: เมื่อสิ้นสุดระยะเวลารอคอยสำหรับการถอนเงิน ผู้มอบหมายสิทธิ์ที่ขายหุ้นของตนก็จะสามารถอ้างสิทธิ์ในโทเค็น MATIC ได้

`updateCommissionRate`: จะอัปเดต % ค่าคอมมิชชั่นให้แก่ผู้ตรวจสอบดูเพิ่มเติมที่[การจ่ายค่าคอมมิชชั่นแก่ผู้ตรวจสอบ](/docs/maintain/validate/validator-commission-operations)

`updateRewards`: เมื่อผู้ตรวจสอบได้รับผลตอบแทนสำหรับการส่ง[เช็คพอยต์](/docs/maintain/glossary#checkpoint-transaction) จะมีการเรียกใช้ฟังก์ชันนี้กับการเบิกจ่ายผลตอบแทนระหว่างผู้ตรวจสอบและผู้มอบหมายสิทธิ์
