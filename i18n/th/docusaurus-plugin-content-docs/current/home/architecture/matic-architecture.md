---
id: polygon-architecture
title: สถาปัตยกรรม Polygon PoS
description: สถาปัตยกรรมของ Polygon PoS รวมถึง Heimdall และ Stains
keywords:
  - docs
  - matic
  - polygon
  - architecture
  - pos
  - blockchain
image: https://wiki.polygon.technology/img/polygon-wiki.png
---
import useBaseUrl from '@docusaurus/useBaseUrl';

# สถาปัตยกรรม Polygon PoS {#polygon-pos-architecture}

เครือข่าย Polygon เป็นแพลตฟอร์มสำหรับแอปพลิเคชันบนบล็อกเชนที่ให้บริการไซด์เชนที่ใช้ Plasma และการทำงานแบบ Proof-of-Stake แบบไฮบริด

โดยสถาปนิก ความงามของ Polygon คือการออกแบบที่หรูหรา ซึ่งมีชั้นการตรวจสอบความถูกต้องทั่วไปแยกออกจากสภาพแวดล้อมการดำเนินการที่แตกต่างกันอย่างเช่น sidechain EVM ที่ถูกละดับเต็มและวิธีอื่น 2 อื่น ๆ เช่น การม้วนแบบล็อคนิรันดร์

เพื่อให้ใช้งานกลไก PoS บนแพลตฟอร์มของเราได้ จึงมีการปรับใช้ชุดของสัญญาการจัดการ**การ Stake** บน Ethereum เช่นเดียวกับชุดของตัวตรวจสอบความถูกต้องที่ได้รับผลตอบแทนซึ่งทำงานบนโหนด·**Heimdall** และ·**Bor**Ethereum เป็นเชนพื้นฐานแรกที่ Polygon รองรับ แต่ Polygon ตั้งใจที่จะให้การสนับสนุนเชนพื้นฐานเพิ่มเติมตามคำแนะนำและฉันทามติของชุมชน เพื่อเปิดใช้งานแพลตฟอร์มบล็อกเชน Layer 2 แบบกระจายศูนย์ที่ทำงานร่วมกันได้

Polygon PoS มีสถาปัตยกรรม 3 เลเยอร์:

1. สัญญาอัจฉริยะของการ Stake บน Ethereum
2. Heimdall (เลเยอร์ Proof of Stake)
3. Bor (เลเยอร์ผู้สร้างบล็อก)

<img src={useBaseUrl("img/matic/Architecture.png")} />

### สัญญาอัจฉริยะของ Polygon (บน Ethereum) {#polygon-smart-contracts-on-ethereum}

Polygon จะดูแลรักษาชุดของสัญญาอัจฉริยะบน Ethereum ซึ่งจะจัดการสิ่งต่อไปนี้:

- การจัดการการ Stake สำหรับเลเยอร์ Proof-of-Stake
- การจัดการด้านการ Delegate รวมถึง Validator Share
- เช็คพอยต์/สแนปช็อตของสถานะไซด์เชน

### Heimdall (เลเยอร์ตัวตรวจสอบความถูกต้อง Proof-of-Stake) {#heimdall-proof-of-stake-validator-layer}

**Heimdall** เป็นโหนดตัวตรวจสอบความถูกต้องแบบ PoS ที่ทำงานสอดคล้องกับสัญญาการ Stake บน Ethereum เพื่อเปิดใช้งานกลไก PoS บน Polygonเราได้นำสิ่งนี้ไปปรับใช้โดยสร้างไว้เพื่อสนับสนุนกลไกจัดการฉันทามติของ Tendermint โดยมีการเปลี่ยนแปลงรูปแบบการลงนามและโครงสร้างข้อมูลต่างๆทำหน้าที่รับผิดชอบในการตรวจสอบความถูกต้องของบล็อก การเลือกคณะกรรมการผู้สร้างบล็อก การสร้างเช็คพอยต์ตัวแทนของบล็อกในไซด์เชนไปยัง Ethereum ในสถาปัตยกรรมของเรา และความรับผิดชอบอื่นๆ อีกมากมาย

เลเยอร์ Heimdall จัดการการรวมกลุ่มของบล็อกที่สร้างโดย Bor ลงใน Merkle Tree และเผยแพร่ Merkle Root เป็นระยะไปยังกลุ่ม Root Chain สำนักพิมพ์เหล่านี้`checkpoints`เรียกว่าทุกสองสามบล็อกบน Bor, ผู้ตรวจสอบ (บนเลเยอร์ Heimdall):

1. ตรวจสอบความถูกต้องทุกบล็อกตั้งแต่เช็คพอยต์สุดท้าย
2. สร้าง Merkle Tree ของแฮชของบล็อก
3. เผยแพร่ Merkle Root ไปยังเชนหลัก

เช็คพอยต์มีความสำคัญเนื่องด้วยเหตุผล 2 ประการ:

1. มอบความมีผลสมบูรณ์บนเชนต้นทาง
2. มอบ Proof of Burn ในการถอนสินทรัพย์

อธิบายมุมมองภาพรวมของกระบวนการได้ดังนี้:

- มีการเลือกชุดย่อยของตัวตรวจสอบความถูกต้องที่ใช้งานอยู่จากพูลให้ทำหน้าที่เป็นผู้สร้างบล็อกสำหรับช่วงเวลาหนึ่งๆการเลือกของแต่ละช่วงเวลาจะต้องได้รับความยินยอมอย่างน้อย 2 ใน 3 ของผู้มีอำนาจผู้สร้างบล็อกเหล่านี้มีหน้าที่ในการสร้างบล็อกและกระจายเสียงไปยังเครือข่ายที่เหลือ
- เช็คพอยต์รวมถึงข้อมูลต้นทางของบล็อกทั้งหมดที่สร้างขึ้นในช่วงเวลาที่กำหนดทุกโหนดจะตรวจสอบความถูกต้องของข้อมูลเดียวกันและแนบลายเซ็นไปด้วยกัน
- ผู้เสนอที่เลือกจากชุดตัวตรวจสอบความถูกต้องต้องรับผิดชอบในการรวบรวมลายเซ็นทั้งหมดสำหรับเช็คพอยต์โดยเฉพาะ และกระทำการเดียวกันบนเชนหลัก
- ความรับผิดชอบในการสร้างบล็อก รวมถึงการเสนอเช็คพอยต์จะผันแปรตามอัตราส่วนของ Stake ของตัวตรวจสอบความถูกต้องในพูลโดยรวม

### Bor (เลเยอร์ผู้สร้างบล็อก) {#bor-block-producer-layer}

Bor คือเลเยอร์ผู้สร้างบล็อก Polygon - เอนทิตีที่มีหน้าที่รับผิดชอบในการรวบรวมธุรกรรมไปยังบล็อก

จะมีการสับเปลี่ยนผู้สร้างบล็อกเป็นระยะๆ ผ่านการเลือกคณะกรรมการบน Heimdall ในระยะเวลาที่กำหนดเป็น `span` ใน Polygonบล็อกได้รับการสร้างขึ้นที่โหนด **Bor** และ VM ไซด์เชนนั้นเข้ากันได้กับ EVMบล็อกที่สร้างบน Bor จะได้รับการตรวจสอบเป็นระยะโดยโหนด Heimdall และเช็คพอยต์ที่ประกอบด้วยแฮชของ Merkle Tree ของชุดบล็อกบน Bor จะได้รับการมอบหมายไปยัง Ethereum เป็นระยะ

### แหล่งข้อมูล {#resources}

- [สถาปัตยกรรม Bor](https://forum.polygon.technology/t/matic-system-overview-bor/9123)
- [สถาปัตยกรรม Heimdall](https://forum.polygon.technology/t/matic-system-overview-heimdall/8323)
- [กลไกของเช็คพอยต์](https://forum.polygon.technology/t/checkpoint-mechanism-on-heimdall/7160)
