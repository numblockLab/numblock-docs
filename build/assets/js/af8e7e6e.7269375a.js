"use strict";(self.webpackChunknumblock_docs=self.webpackChunknumblock_docs||[]).push([[1330],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),p=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(r),d=n,h=u["".concat(l,".").concat(d)]||u[d]||m[d]||a;return r?o.createElement(h,s(s({ref:t},c),{},{components:r})):o.createElement(h,s({ref:t},c))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,s=new Array(a);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:n,s[1]=i;for(var p=2;p<a;p++)s[p]=r[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},1657:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var o=r(7462),n=(r(7294),r(3905));const a={id:"networking",title:"P2P Network"},s=void 0,i={unversionedId:"architecture/modules/networking",id:"architecture/modules/networking",title:"P2P Network",description:"Overview",source:"@site/docs/architecture/modules/networking.md",sourceDirName:"architecture/modules",slug:"/architecture/modules/networking",permalink:"/docs/architecture/modules/networking",draft:!1,tags:[],version:"current",frontMatter:{id:"networking",title:"P2P Network"},sidebar:"develop",previous:{title:"State",permalink:"/docs/architecture/modules/state"},next:{title:"Transaction Handling",permalink:"/docs/architecture/modules/txpool"}},l={},p=[{value:"Overview",id:"overview",level:2},{value:"GRPC",id:"grpc",level:2},{value:"GRPC for Node Operators",id:"grpc-for-node-operators",level:3},{value:"GRPC for Other Nodes",id:"grpc-for-other-nodes",level:3},{value:"\ud83d\udcdc Resources",id:"-resources",level:2}],c={toc:p};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,o.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"A node has to communicate with other nodes on the network, in order to exchange useful information.",(0,n.kt)("br",null),"\nTo accomplish this task, the NumBlock leverages the battle-tested ",(0,n.kt)("strong",{parentName:"p"},"libp2p")," framework."),(0,n.kt)("p",null,"The choice to go with ",(0,n.kt)("strong",{parentName:"p"},"libp2p")," is primarily focused on:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Speed")," - libp2p has a significant performance improvement over devp2p (used in GETH and other clients)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Extensibility")," - it serves as a great foundation for other features of the system"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Modularity")," - libp2p is modular by nature, just like the NumBlock. This gives greater flexibility, especially when parts of the NumBlock need to be swappable")),(0,n.kt)("h2",{id:"grpc"},"GRPC"),(0,n.kt)("p",null,"On top of ",(0,n.kt)("strong",{parentName:"p"},"libp2p"),", the NumBlock uses the ",(0,n.kt)("strong",{parentName:"p"},"GRPC")," protocol. ",(0,n.kt)("br",null),"\nTechnically, the NumBlock uses several GRPC protocols, which will be covered later on."),(0,n.kt)("p",null,"The GRPC layer helps abstract all the request/reply protocols and simplifies the streaming protocols needed for the NumBlock to function."),(0,n.kt)("p",null,"GRPC relies on ",(0,n.kt)("strong",{parentName:"p"},"Protocol Buffers")," to define ",(0,n.kt)("em",{parentName:"p"},"services")," and ",(0,n.kt)("em",{parentName:"p"},"message structures"),". ",(0,n.kt)("br",null),"\nThe services and structures are defined in ",(0,n.kt)("em",{parentName:"p"},".proto")," files, which are compiled and are language-agnostic."),(0,n.kt)("p",null,"Earlier, we mentioned that the NumBlock leverages several GRPC protocols.",(0,n.kt)("br",null),"\nThis was done to boost the overall UX for the node operator, something which often lags with clients like GETH and Parity."),(0,n.kt)("p",null,"The node operator has a better overview of what is going on with the system by calling the GRPC service, instead of sifting through logs to find the information they're looking for."),(0,n.kt)("h3",{id:"grpc-for-node-operators"},"GRPC for Node Operators"),(0,n.kt)("p",null,"The following section might seem familiar because it was briefly covered in the ",(0,n.kt)("a",{parentName:"p",href:"/docs/validators/cli-commands"},"CLI Commands")," section."),(0,n.kt)("p",null,"The GRPC service that is intended to be used by ",(0,n.kt)("strong",{parentName:"p"},"node operators")," is defined like so:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="minimal/proto/system.proto"',title:'"minimal/proto/system.proto"'},"service System {\n    // GetInfo returns info about the client\n    rpc GetStatus(google.protobuf.Empty) returns (ServerStatus);\n\n    // PeersAdd adds a new peer\n    rpc PeersAdd(PeersAddRequest) returns (google.protobuf.Empty);\n\n    // PeersList returns the list of peers\n    rpc PeersList(google.protobuf.Empty) returns (PeersListResponse);\n\n    // PeersInfo returns the info of a peer\n    rpc PeersStatus(PeersStatusRequest) returns (Peer);\n\n    // Subscribe subscribes to blockchain events\n    rpc Subscribe(google.protobuf.Empty) returns (stream BlockchainEvent);\n}\n")),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"The CLI commands actually call the implementations of these service methods. "),(0,n.kt)("p",{parentName:"admonition"},"These methods are implemented in ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("em",{parentName:"strong"},"minimal/system_service.go")),".")),(0,n.kt)("h3",{id:"grpc-for-other-nodes"},"GRPC for Other Nodes"),(0,n.kt)("p",null,"The NumBlock also implements several service methods that are used by other nodes on the network. ",(0,n.kt)("br",null),"\nThe mentioned service is described in the ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",{parentName:"strong",href:"/docs/architecture/modules/protocol"},"Protocol"))," section."),(0,n.kt)("h2",{id:"-resources"},"\ud83d\udcdc Resources"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://developers.google.com/protocol-buffers"},"Protocol Buffers"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://libp2p.io/"},"libp2p"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},(0,n.kt)("a",{parentName:"strong",href:"https://grpc.io/"},"gRPC")))))}u.isMDXComponent=!0}}]);