"use strict";(self.webpackChunknumblock_docs=self.webpackChunknumblock_docs||[]).push([[9315],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>k});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=c(a),p=o,k=m["".concat(l,".").concat(p)]||m[p]||u[p]||r;return a?n.createElement(k,s(s({ref:t},d),{},{components:a})):n.createElement(k,s({ref:t},d))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[m]="string"==typeof e?e:o,s[1]=i;for(var c=2;c<r;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},6660:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=a(7462),o=(a(7294),a(3905));const r={description:"Detecting that MetaMask is installed and adding additional networks and custom tokens easily make a great dApp user experience, specially those who are not technically skilled. It is important to streamline the onboarding process as much as you can to make it easier for consumers to operate your application. This guide explains how to build a simple button for your front-end application that will automatically add Figchain to MetaMask.",keywords:["metamask","metamask api","detect metamask","detect chainid","detect account"]},s="MetaMask API",i={unversionedId:"developers/interact/metamask",id:"developers/interact/metamask",title:"MetaMask API",description:"Detecting that MetaMask is installed and adding additional networks and custom tokens easily make a great dApp user experience, specially those who are not technically skilled. It is important to streamline the onboarding process as much as you can to make it easier for consumers to operate your application. This guide explains how to build a simple button for your front-end application that will automatically add Figchain to MetaMask.",source:"@site/docs/developers/interact/metamask.mdx",sourceDirName:"developers/interact",slug:"/developers/interact/metamask",permalink:"/docs/developers/interact/metamask",draft:!1,tags:[],version:"current",frontMatter:{description:"Detecting that MetaMask is installed and adding additional networks and custom tokens easily make a great dApp user experience, specially those who are not technically skilled. It is important to streamline the onboarding process as much as you can to make it easier for consumers to operate your application. This guide explains how to build a simple button for your front-end application that will automatically add Figchain to MetaMask.",keywords:["metamask","metamask api","detect metamask","detect chainid","detect account"]},sidebar:"develop",previous:{title:"Interacting with NumBlock",permalink:"/docs/developers/interact"},next:{title:"Using Web3.js",permalink:"/docs/developers/interact/web3-js"}},l={},c=[{value:"Summary of actions",id:"summary-of-actions",level:2},{value:"Detect MetaMask",id:"detect-metamask",level:2},{value:"Detect NumBlock",id:"detect-numblock",level:2},{value:"Detect account",id:"detect-account",level:2},{value:"Add Custom Token to MetaMask",id:"add-custom-token-to-metamask",level:2},{value:"More info",id:"more-info",level:2}],d={toc:c};function m(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"metamask-api"},"MetaMask API"),(0,o.kt)("p",null,"Detecting that MetaMask is installed and adding additional networks and custom tokens easily make a great dApp user experience, specially those who are not technically skilled. It is important to streamline the onboarding process as much as you can to make it easier for consumers to operate your application. This guide explains how to build a simple button for your front-end application that will automatically add NumBlock to MetaMask."),(0,o.kt)("h2",{id:"summary-of-actions"},"Summary of actions"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Detect MetaMask or propose its installation"),(0,o.kt)("li",{parentName:"ol"},"Detect ChainId, and propose to add NumBlock if needed"),(0,o.kt)("li",{parentName:"ol"},"Detect Account, and propose to connect if needed")),(0,o.kt)("h2",{id:"detect-metamask"},"Detect MetaMask"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},"if (typeof window.ethereum !== 'undefined') {\n  console.log('MetaMask is installed!');\n  //TODO: propose users to install MetaMask\n}\n")),(0,o.kt)("h2",{id:"detect-numblock"},"Detect NumBlock"),(0,o.kt)("p",null,"The following code includes all the parameters needed by MetaMask to add NumBlock to its networks programmatically"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},'var NUMBLOCK_MAINNET_PARAMS = {\n    chainId: "0x64",\n    chainName: "numblock",\n    nativeCurrency: {\n        name: "NUMB",\n        symbol: "NUMB",\n        decimals: 18,\n    },\n    rpcUrls: ["https://rpc-testnet.numblock.org"],\n    blockExplorerUrls: ["https://testnet.numblock.org"],\n}\n\nvar addNumBlockToMetaMask = function() {\n    window.ethereum.request({\n        method: "wallet_addEthereumChain",\n        params: [NUMBLOCK_MAINNET_PARAMS],\n    })\n    .catch((error) => {\n        console.log(error);\n    });\n};\n')),(0,o.kt)("h2",{id:"detect-account"},"Detect account"),(0,o.kt)("p",null,"Our dApps need access to the user's account, follow this code example to get it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},"var getAccount = async function(){\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    // MetaMask provide a single account\n    console.log(accounts[0]);\n    alert(accounts[0]);\n}\n")),(0,o.kt)("h2",{id:"add-custom-token-to-metamask"},"Add Custom Token to MetaMask"),(0,o.kt)("p",null,"In addition to directing the user to ",(0,o.kt)("a",{parentName:"p",href:"https://metamask.zendesk.com/hc/en-us/articles/360015489031-How-to-add-unlisted-tokens-custom-tokens-in-MetaMask#h_01FWH492CHY60HWPC28RW0872H"},"manually import tokens using the MetaMask UI"),",\nyou can add code to your dApp's front end to prompt the user to add it to their MetaMask wallet automatically. This can be done using the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.metamask.io/guide/rpc-api.html#wallet-watchasset"},(0,o.kt)("inlineCode",{parentName:"a"},"wallet_watchAsset")," method"),". To do so, add the following code to your dApp's front end:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript",metastring:"showLineNumbers",showLineNumbers:!0},"const tokenAddress = 'custom-token-address-on-numblock';\nconst tokenSymbol = 'your-token-symbol';\nconst tokenDecimals = 18; //or how ever many decimals\nconst tokenImage = 'your-token-image-url';\n\ntry {\n  // wasAdded is a boolean. Like any RPC method, an error may be thrown.\n  const wasAdded = window.ethereum.request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20', // Initially only supports ERC20, but eventually more!\n      options: {\n        address: tokenAddress, // The address that the token is at.\n        symbol: tokenSymbol, // A ticker symbol or shorthand, up to 5 chars.\n        decimals: tokenDecimals, // The number of decimals in the token\n        image: tokenImage, // A string url of the token logo\n      },\n    },\n  });\n\n  if (wasAdded) {\n    console.log('Token Added');\n  } else {\n    console.log('Failed to add');\n  }\n} catch (error) {\n  console.log(error);\n}\n")),(0,o.kt)("h2",{id:"more-info"},"More info"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Read more about ",(0,o.kt)("a",{parentName:"li",href:"https://consensys.net/blog/metamask/connect-users-to-layer-2-networks-with-the-metamask-custom-networks-api/"},"Connect Users To Layer 2 Networks With The MetaMask Custom Networks API")," on the MetaMask Blog."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-3085"},"EIP-3085")," is an ",(0,o.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/"},"Ethereum Improvement Proposal")," that defines an RPC method for adding Ethereum-compatible chains to wallet applications."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.metamask.io/guide/ethereum-provider.html#table-of-contents"},"Full API for the window.ethereum object"))))}m.isMDXComponent=!0}}]);